amends ".../pkl/package.pkl"

targets {
  new {
    name = "os_guard"
    command = "echo 'hello world'"
    platforms {
      "made-up-os/default-arch"
    }
  }

  // Bar depends on foo and selecting it should fail if we cannot
  // build foo due to a platform mismatch
  new {
    name = "bar"
    command = "echo 'hello world'"
    dependencies {
      ":os_guard"
    }
  }

  new {
    name = "arch_guard"
    inputs { "src/*.txt" }
    command = "echo 'hello world'"
    platforms {
      "default-os/made-up-arch"
    }
  }
}
