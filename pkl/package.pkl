module package

import "alias.pkl"
//import "environment.pkl"

import "output_check.pkl"

class Target {
  name: String
  command: String?
  dependencies: Listing<String>(isDistinct)
  inputs:  Listing<String>(isDistinct)
  exclude_inputs:  Listing<String>(isDistinct)
  outputs: Listing<String>(isDistinct)
  bin_output: String?
  output_checks: Listing<output_check>?
  timeout: String?

  environment_variables: Mapping<String, String>?
  fingerprint: Mapping<String, String>?
  // Target Filtering
  tags: Listing<String>(isDistinct)
  platforms: Listing<String>(isDistinct)?
}

default_platforms: Listing<String>(isDistinct)?

targets: Listing<Target>(isDistinctBy((it) -> it.name))

aliases: Listing<alias>(isDistinctBy((it) -> it.name))?

environments: Listing<alias>(isDistinctBy((it) -> it.name))?
